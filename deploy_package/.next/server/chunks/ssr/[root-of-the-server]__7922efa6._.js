module.exports=[56704,(a,b,c)=>{b.exports=a.x("next/dist/server/app-render/work-async-storage.external.js",()=>require("next/dist/server/app-render/work-async-storage.external.js"))},32319,(a,b,c)=>{b.exports=a.x("next/dist/server/app-render/work-unit-async-storage.external.js",()=>require("next/dist/server/app-render/work-unit-async-storage.external.js"))},20635,(a,b,c)=>{b.exports=a.x("next/dist/server/app-render/action-async-storage.external.js",()=>require("next/dist/server/app-render/action-async-storage.external.js"))},36313,(a,b,c)=>{"use strict";b.exports=a.r(97877).vendored.contexts.HooksClientContext},18341,(a,b,c)=>{"use strict";b.exports=a.r(97877).vendored.contexts.ServerInsertedHtml},46074,a=>{"use strict";a.s(["BASE_PATH",0,"/gerador-matricula"],46074)},27042,a=>{"use strict";var b=a.i(87924),c=a.i(75003),d=a.i(50944),e=a.i(72131),f=a.i(70106);let g=(0,f.default)("arrow-left",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]]),h=(0,f.default)("file-text",[["path",{d:"M6 22a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h8a2.4 2.4 0 0 1 1.704.706l3.588 3.588A2.4 2.4 0 0 1 20 8v12a2 2 0 0 1-2 2z",key:"1oefj6"}],["path",{d:"M14 2v5a1 1 0 0 0 1 1h5",key:"wfsgrz"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]]);var i=a.i(96221);let j=(0,f.default)("circle-alert",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]]),k=(0,f.default)("calendar",[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]]),l=(0,f.default)("mail",[["path",{d:"m22 7-8.991 5.727a2 2 0 0 1-2.009 0L2 7",key:"132q7q"}],["rect",{x:"2",y:"4",width:"20",height:"16",rx:"2",key:"izxlao"}]]),m=(0,f.default)("phone",[["path",{d:"M13.832 16.568a1 1 0 0 0 1.213-.303l.355-.465A2 2 0 0 1 17 15h3a2 2 0 0 1 2 2v3a2 2 0 0 1-2 2A18 18 0 0 1 2 4a2 2 0 0 1 2-2h3a2 2 0 0 1 2 2v3a2 2 0 0 1-.8 1.6l-.468.351a1 1 0 0 0-.292 1.233 14 14 0 0 0 6.392 6.384",key:"9njp5v"}]]),n=(0,f.default)("graduation-cap",[["path",{d:"M21.42 10.922a1 1 0 0 0-.019-1.838L12.83 5.18a2 2 0 0 0-1.66 0L2.6 9.08a1 1 0 0 0 0 1.832l8.57 3.908a2 2 0 0 0 1.66 0z",key:"j76jl0"}],["path",{d:"M22 10v6",key:"1lu8f3"}],["path",{d:"M6 12.5V16a6 3 0 0 0 12 0v-3.5",key:"1r8lef"}]]),o=(0,f.default)("clock",[["path",{d:"M12 6v6l4 2",key:"mmk7yg"}],["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]]);var p=a.i(38246),q=a.i(46074);function r({params:a}){let f,r,{data:t,status:u}=(0,c.useSession)(),v=(0,d.useRouter)(),w=(0,e.use)(a).cpf,[x,y]=(0,e.useState)(null),[z,A]=(0,e.useState)(!0),[B,C]=(0,e.useState)(""),[D,E]=(0,e.useState)(!1),[F,G]=(0,e.useState)(!1);(0,e.useEffect)(()=>{"unauthenticated"===u&&v.push("/login")},[u,v]),(0,e.useEffect)(()=>{w&&"authenticated"===u&&a();async function a(){try{let a=await fetch(`${q.BASE_PATH}/api/students/${w}`);if(!a.ok)throw Error("Student not found");let b=await a.json();y(b.data)}catch(a){C("Aluno não encontrado ou erro na busca.")}finally{A(!1)}}},[w,u]);let H=async(a=!1)=>{if(x){if("ATIVO"!==x["Situação Cadastral"]&&!a)return void G(!0);E(!0),G(!1);try{let a=await fetch(`${q.BASE_PATH}/api/students/${w}/generate`,{method:"POST"});if(!a.ok){let b=await a.json();throw Error(b.error||"Erro ao gerar PDF")}let b=await a.blob(),c=window.URL.createObjectURL(b),d=document.createElement("a");d.href=c,d.download=`Declaracao_Matricula_${x["Nome Completo"].replace(/\s+/g,"_")}.pdf`,document.body.appendChild(d),d.click(),window.URL.revokeObjectURL(c),document.body.removeChild(d)}catch(a){alert(a.message||"Erro ao gerar documento")}finally{E(!1)}}};if("loading"===u||z)return(0,b.jsxs)("div",{className:"flex h-[80vh] flex-col items-center justify-center gap-4",children:[(0,b.jsx)(i.Loader2,{className:"h-10 w-10 animate-spin text-primary"}),(0,b.jsx)("p",{className:"text-xs font-bold uppercase tracking-widest text-gray-400",children:"Carregando perfil..."})]});if(B||!x)return(0,b.jsxs)("div",{className:"flex h-[80vh] flex-col items-center justify-center gap-6 animate-in fade-in duration-500",children:[(0,b.jsx)("div",{className:"bg-red-50 p-4 rounded-full",children:(0,b.jsx)(j,{className:"h-12 w-12 text-red-500"})}),(0,b.jsxs)("div",{className:"text-center",children:[(0,b.jsx)("p",{className:"text-xl font-bold text-gray-900",children:B||"Aluno não encontrado"}),(0,b.jsx)("p",{className:"text-sm text-gray-500 mt-1",children:"Verifique o CPF digitado e tente novamente."})]}),(0,b.jsxs)("button",{onClick:()=>v.push("/busca"),className:"inline-flex items-center gap-2 px-6 py-3 bg-black text-white rounded-full text-sm font-bold hover:bg-gray-900 transition-all active:scale-95",children:[(0,b.jsx)(g,{size:16}),"Voltar para busca"]})]});let I=(f=(x.Turma||x.TURMA||"").toUpperCase(),r=x["Data da matrícula"]||x["Data da Matrícula"]||x["DATA DE MATRÍCULA"],f.includes("5B")?"01/05/2025":f.includes("5A")||f.includes("TURMA 5")?"01/02/2025":r||"-"),J="DISTRATO"===x["Situação Cadastral"];return(0,b.jsxs)("div",{className:"max-w-5xl mx-auto px-4 sm:px-6 lg:px-8 py-12 animate-in fade-in slide-in-from-bottom-4 duration-500",children:[(0,b.jsxs)("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center gap-6 mb-12",children:[(0,b.jsxs)(p.default,{href:"/busca",className:"group flex items-center gap-2 text-sm font-bold uppercase tracking-widest text-gray-400 hover:text-primary transition-colors",children:[(0,b.jsx)(g,{size:18,className:"group-hover:-translate-x-1 transition-transform"}),"Voltar para busca"]}),(0,b.jsxs)("button",{onClick:()=>H(),disabled:D||J,className:"w-full sm:w-auto inline-flex items-center justify-center gap-3 rounded-full bg-black px-8 py-4 text-sm font-bold text-white shadow-xl hover:bg-gray-900 active:scale-95 disabled:opacity-20 disabled:pointer-events-none transition-all group overflow-hidden relative",children:[(0,b.jsx)("div",{className:"absolute inset-0 bg-primary opacity-0 group-hover:opacity-10 transition-opacity"}),D?(0,b.jsx)(i.Loader2,{className:"animate-spin h-5 w-5"}):(0,b.jsx)(h,{className:"h-5 w-5 text-primary"}),(0,b.jsx)("span",{className:"relative",children:D?"Processando Documento...":"Gerar Declaração de Matrícula"})]})]}),(0,b.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-8",children:[(0,b.jsxs)("div",{className:"lg:col-span-1 space-y-6",children:[(0,b.jsxs)("div",{className:"bg-white rounded-3xl border border-gray-100 p-8 shadow-sm",children:[(0,b.jsx)("div",{className:"h-24 w-24 rounded-2xl bg-gray-50 flex items-center justify-center mb-6",children:(0,b.jsx)("span",{className:"text-4xl font-bold text-gray-200",children:x["Nome Completo"]?.charAt(0)})}),(0,b.jsx)("h2",{className:"text-2xl font-bold text-gray-900 leading-tight",children:x["Nome Completo"]}),(0,b.jsx)("div",{className:"mt-4 flex flex-col gap-2",children:(0,b.jsx)("span",{className:`inline-flex items-center w-fit px-3 py-1 rounded-full text-[10px] font-bold uppercase tracking-wider ${J?"bg-red-50 text-red-600 border border-red-100":"TRANCADO"===x["Situação Cadastral"]?"bg-amber-50 text-amber-600 border border-amber-100":"bg-green-50 text-green-600 border border-green-100"}`,children:x["Situação Cadastral"]})})]}),(0,b.jsxs)("div",{className:"bg-primary/5 rounded-3xl p-6 border border-primary/10",children:[(0,b.jsxs)("div",{className:"flex items-center gap-3 text-primary mb-2",children:[(0,b.jsx)(o,{size:18}),(0,b.jsx)("h4",{className:"text-xs font-bold uppercase tracking-widest",children:"Data Sugerida (PDF)"})]}),(0,b.jsx)("p",{className:"text-2xl font-bold text-primary",children:I}),(0,b.jsx)("p",{className:"text-[10px] text-primary/60 mt-1 uppercase font-medium",children:"Calculado via Regras de Turma"})]})]}),(0,b.jsxs)("div",{className:"lg:col-span-2",children:[(0,b.jsxs)("div",{className:"bg-white rounded-3xl border border-gray-100 shadow-sm overflow-hidden",children:[(0,b.jsx)("div",{className:"px-8 py-6 border-b border-gray-50",children:(0,b.jsx)("h3",{className:"text-xs font-bold uppercase tracking-[0.2em] text-gray-400",children:"Informações Cadastrais"})}),(0,b.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2",children:[(0,b.jsx)(s,{icon:(0,b.jsx)(n,{size:18}),label:"Curso",value:x.Curso||x.CURSO||x.sourceSheet}),(0,b.jsx)(s,{icon:(0,b.jsx)(k,{size:18}),label:"Nascimento",value:x["Data de Nascimento"]||x["DATA DE NASCIMENTO"]}),(0,b.jsx)(s,{icon:(0,b.jsx)(l,{size:18}),label:"E-mail",value:x["E-mail"]||x.EMAIL||"-"}),(0,b.jsx)(s,{icon:(0,b.jsx)(m,{size:18}),label:"Telefone",value:x.Telefone||"-"}),(0,b.jsx)(s,{icon:(0,b.jsx)(h,{size:18}),label:"CPF",value:x.CPF}),(0,b.jsx)(s,{icon:(0,b.jsx)(k,{size:18}),label:"Data de Matrícula",value:x["Data da matrícula"]||x["Data da Matrícula"]||x["DATA DE MATRÍCULA"]||"-"})]})]}),J&&(0,b.jsxs)("div",{className:"mt-6 bg-red-50 border border-red-100 rounded-2xl p-6 flex gap-4 animate-in shake-in duration-500",children:[(0,b.jsx)(j,{className:"text-red-500 h-6 w-6 flex-shrink-0"}),(0,b.jsxs)("div",{children:[(0,b.jsx)("h4",{className:"text-sm font-bold text-red-700 uppercase tracking-widest",children:"Restrição de Emissão"}),(0,b.jsx)("p",{className:"text-sm text-red-600 mt-1 font-medium",children:"Este aluno está em status de Distrato. A emissão de documentos oficiais está suspensa permanentemente."})]})]})]})]}),F&&(0,b.jsxs)("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4",children:[(0,b.jsx)("div",{className:"absolute inset-0 bg-black/60 backdrop-blur-sm",onClick:()=>G(!1)}),(0,b.jsxs)("div",{className:"relative bg-white rounded-[2rem] shadow-2xl max-w-md w-full p-10 animate-in zoom-in-95 duration-200 text-center border border-gray-100",children:[(0,b.jsx)("div",{className:"bg-amber-50 h-20 w-20 rounded-3xl flex items-center justify-center mx-auto mb-6 text-amber-500",children:(0,b.jsx)(j,{size:40})}),(0,b.jsx)("h3",{className:"text-2xl font-bold text-gray-900 mb-2 tracking-tight",children:"Aluno com Restrição"}),(0,b.jsxs)("p",{className:"text-gray-500 mb-8 font-medium",children:["A situação cadastral desta conta é ",(0,b.jsxs)("span",{className:"text-amber-600 font-bold",children:['"',x["Situação Cadastral"],'"']}),". Deseja confirmar a geração da declaração?"]}),(0,b.jsxs)("div",{className:"flex flex-col gap-3",children:[(0,b.jsx)("button",{onClick:()=>H(!0),className:"w-full py-4 text-sm font-bold text-white bg-black rounded-full hover:bg-gray-900 transition-all active:scale-95 shadow-lg shadow-black/10",children:"Confirmar Emissão"}),(0,b.jsx)("button",{onClick:()=>G(!1),className:"w-full py-4 text-sm font-bold text-gray-400 hover:text-gray-600 transition-colors",children:"Cancelar"})]})]})]})]})}function s({icon:a,label:c,value:d}){return(0,b.jsxs)("div",{className:"px-8 py-8 border-r border-b border-gray-50 last:border-r-0 group hover:bg-gray-50/50 transition-colors",children:[(0,b.jsxs)("div",{className:"flex items-center gap-3 text-gray-300 mb-2 group-hover:text-primary transition-colors",children:[a,(0,b.jsx)("span",{className:"text-[10px] font-bold uppercase tracking-[0.2em]",children:c})]}),(0,b.jsx)("p",{className:"text-base font-bold text-gray-900 truncate",title:d,children:d})]})}a.s(["default",()=>r],27042)}];

//# sourceMappingURL=%5Broot-of-the-server%5D__7922efa6._.js.map